type: object
required:
  - id
  - type
  - name
  - alertSource
  - severity
  - category
  - subCategory
  - dateIssued
  - location
model:searchProperties:
  - name
  - description
model:defaultProperty: name
ui:filters:
  - source
  - severity
properties:
  id:
    $ref: './../$defs.yaml#/NGSIentityFormat'
    description: 'Unique identifier of the entity'
    default: Alert:00000
    ui:hide:
      table: true
      form: true
      info: true
  type:
    type: string
    description: 'NGSI Entity type. It has to be Alert.'
    enum:
      - Alert
    default: Alert
    ui:hide:
      form: true
      table: true
      info: true
  name:
    type: string
    ui:formItemGridClass: 'col-md-6'
  description:
    type: string
    ui:formItemType: textarea
    ui:hide:
      table: true
  category:
    type: string
    enum:
      - naturalDisaster
      - weather
      - environment
      - security
      - agriculture
      - health
    ui:formItemType: select
    ui:formItemGridClass: 'col-md-6'
    ui:i18n: true
    ui:i18nPathPrefix: enum.alert.category
    ui:hide:
      table: true
  subCategory:
    type: string
    'ui:formItemEnumRules':
      - property: category
        conditionSchema:
          const: naturalDisaster
        enum:
          - flood
          - tsunami
          - coastalEvent
          - earthquake
      - property: category
        conditionSchema:
          const: weather
        enum:
          - tornado
          - hurricane
          - tropicalCyclone
      - property: category
        conditionSchema:
          const: environment
        enum:
          - waterPollution
          - airPollution
      - property: category
        conditionSchema:
          const: security
        enum:
          - assault
          - crowdRisk
          - suspiciousAction
      - property: category
        conditionSchema:
          const: agriculture
        enum:
          - bacteria
          - microbe
          - fungus
          - mite
      - property: category
        conditionSchema:
          const: health
        enum:
          - fallenPatient
          - bumpedPatient
    ui:formItemType: select
    ui:formItemGridClass: 'col-md-6'
    ui:i18n: true
    ui:i18nPathPrefix: enum.alert.subCategory
  severity:
    type: string
    enum:
      - informational
      - low
      - medium
      - high
      - critical
    ui:formItemType: select
    ui:formItemGridClass: 'col-md-auto'
    ui:contentCustomCompose: 'resources/elements/custom-content-items/custom-content-item-severity'
    ui:formItemCustomCompose: 'resources/elements/custom-form-items/custom-form-item-severity'
    ui:i18n: true
    ui:i18nPathPrefix: enum.alert.severity
  owner:
    $ref: './../$defs.yaml#/owner'
  source:
    type: string
    readOnly: true
    const: PathoVIEW
    enum:
      - PathoTWEET
      - PathoCAM
      - PathoVIEW
      - PathoSAT
    ui:hide:
      form: true
  alertSource:
    $ref: './../$defs.yaml#/NGSIentityFormat'
    ui:dependence:
      source: cookie
      property: emergency-event
    ui:hide:
      table: true
      form: true
      info: true
  location:
    $ref: './../$defs.yaml#/Location'
  address:
    $ref: './../$defs.yaml#/Address'
  dateIssued:
    type: string
    format: date-time
  dateCreated:
    type: string
    format: date-time
    db:skipInSchemaDefinition: true
    ui:hide:
      form: true
      table: true
  dateModified:
    type: string
    format: date-time
    db:skipInSchemaDefinition: true
    ui:hide:
      form: true
      table: true
  validFrom:
    type: string
    format: date-time
    ui:formItemGridClass: 'col-md-6'
    ui:hide:
      table: true
  validTo:
    type: string
    format: date-time
    ui:formItemGridClass: 'col-md-6'
    ui:hide:
      table: true
