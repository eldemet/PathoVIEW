type: object
description: 'An alert generated by a user or device in a given location'
required:
  - id
  - type
  - name
  - alertSource
  - severity
  - category
  - subCategory
  - dateIssued
  - location
model:searchProperties:
  - name
  - alternateName
  - description
  - source
model:defaultProperty: dateIssued
properties:
  id:
    $ref: './../$defs.yaml#/NGSIentityFormat'
    description: 'Unique identifier of the entity'
    default: Alert:00000
    ui:hide:
      table: true
      form: true
  type:
    type: string
    description: 'NGSI Entity type. It has to be Alert.'
    enum:
      - Alert
    default: Alert
    ui:hide:
      form: true
      table: true
  name:
    type: string
    ui:formItemGridClass: 'col-md-6'
  alternateName:
    type: string
    ui:formItemGridClass: 'col-md-6'
    ui:hide:
      table: true
  description:
    type: string
    ui:formItemType: textarea
    ui:hide:
      table: true
  category:
    type: string
    enum:
      - naturalDisaster
      - weather
      - environment
      - security
      - agriculture
    ui:formItemType: select
    ui:formItemGridClass: 'col-md-6'
    ui:i18n: true
    ui:i18nPathPrefix: enum.alert.category
    ui:hide:
      table: true
  subCategory:
    type: string
    'ui:formItemEnumRules':
      - property: category
        conditionSchema:
          const: naturalDisaster
        enum:
          - flood
          - tsunami
          - coastalEvent
          - earthquake
      - property: category
        conditionSchema:
          const: weather
        enum:
          - tornado
          - hurricane
          - tropicalCyclone
      - property: category
        conditionSchema:
          const: environment
        enum:
          - waterPollution
          - airPollution
      - property: category
        conditionSchema:
          const: security
        enum:
          - assault
          - crowdRisk
          - suspiciousAction
      - property: category
        conditionSchema:
          const: agriculture
        enum:
          - bacteria
          - microbe
          - fungus
          - mite
          - virus
          - nematodes
          - irrigation
          - fertilisation
    ui:formItemType: select
    ui:formItemGridClass: 'col-md-6'
    ui:i18n: true
    ui:i18nPathPrefix: enum.alert.subCategory
  severity:
    type: string
    enum:
      - informational
      - low
      - medium
      - high
      - critical
    ui:formItemType: select
    ui:formItemGridClass: 'col-md-auto'
    ui:contentCustomCompose: 'resources/elements/custom-content-items/custom-content-item-severity'
    ui:formItemCustomCompose: 'resources/elements/custom-form-items/custom-form-item-severity'
    ui:i18n: true
    ui:i18nPathPrefix: enum.alert.severity
  owner:
    $ref: './../$defs.yaml#/owner'
  seeAlso:
    $ref: './../$defs.yaml#/seeAlso'
  source:
    type: string
    readOnly: true
    const: PathoVIEW
  alertSource:
    $ref: './../$defs.yaml#/NGSIentityFormat'
    ui:dependence:
      source: cookie
      property: emergency-event
    ui:hide:
      table: true
      form: true
  data:
    type: object
    description: 'Payload containing the data retrieved.'
    ui:hide:
      table: true
    properties:
      image:
        type: string
        ui:formItemCustomCompose: 'resources/elements/custom-form-items/custom-form-item-image'
  dateIssued:
    type: string
    description: 'The date and time the item was issued in ISO8601 UTC format.'
    format: date-time
  dateCreated:
    type: string
    description: 'Entity creation timestamp. This will usually be allocated by the storage platform.'
    format: date-time
    db:skipInSchemaDefinition: true
    ui:hide:
      form: true
      table: true
  dateModified:
    type: string
    description: 'Timestamp of the last modification of the entity. This will usually be allocated by the storage platform.'
    format: date-time
    db:skipInSchemaDefinition: true
    ui:hide:
      form: true
      table: true
  validFrom:
    type: string
    description: 'The start of the validity period for this forecast as a ISO8601 format'
    format: date-time
    ui:formItemGridClass: 'col-md-6'
    ui:hide:
      table: true
  validTo:
    type: string
    description: 'The end of the validity period for this forecast as a ISO8601 format'
    format: date-time
    ui:formItemGridClass: 'col-md-6'
    ui:hide:
      table: true
  address:
    $ref: './../$defs.yaml#/Address'
  areaServed:
    type: string
    description: 'The geographic area where a service or offered item is provided'
    ui:hide:
      table: true
  location:
    $ref: './../$defs.yaml#/Location'
